import {Link, useLocation} from 'react-router-dom';
import {useDispatch, useSelector} from "react-redux";
import { logOut } from "../../store/userSlice.js";
import { switchChat } from '../../store/chatSlice.js';

export default function Header(props){
    const dispatch = useDispatch();
    const user = useSelector(store => store.user);
    const location = useLocation();

    return (
        <header className="header-main">
            <div className="center-main-block">
                <div className="header_content">
                    {location.pathname === '/' ? (
                        <div className="header_logo">
                            <svg width="165" height="82" viewBox="0 0 165 82" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <line className="logo_color-stroke" y1="1" x2="160" y2="1" stroke="#121212" strokeWidth="2"/>
                                <line className="logo_color-stroke" y1="79" x2="160" y2="79" stroke="#121212" strokeWidth="2"/>
                                <path className="logo_color-fill" d="M8.85938 10.5156H15.6875V62.7656H39.7344V68.4062H8.85938V10.5156ZM71.7969 14.375C76.151 18.7292 78.3281 27.0417 78.3281 39.3125C78.3281 51.7812 76.151 60.1927 71.7969 64.5469C69.224 67.1198 65.9583 68.4062 62 68.4062C57.8438 68.4062 54.4792 67.1198 51.9062 64.5469C47.5521 60.1927 45.375 51.7812 45.375 39.3125C45.375 27.0417 47.5521 18.7292 51.9062 14.375C54.4792 11.8021 57.8438 10.5156 62 10.5156C65.9583 10.5156 69.224 11.8021 71.7969 14.375ZM56.0625 18.8281C53.4896 21.401 52.2031 28.2292 52.2031 39.3125C52.2031 50.5938 53.4896 57.5208 56.0625 60.0938C57.8438 61.875 59.8229 62.7656 62 62.7656C63.9792 62.7656 65.8594 61.875 67.6406 60.0938C70.2135 57.5208 71.5 50.5938 71.5 39.3125C71.5 28.2292 70.2135 21.401 67.6406 18.8281C65.8594 17.0469 63.9792 16.1562 62 16.1562C59.8229 16.1562 57.8438 17.0469 56.0625 18.8281ZM108.906 28.625C108.708 23.4792 107.719 20.0156 105.938 18.2344C104.552 16.849 102.969 16.1562 101.188 16.1562C99.6042 16.1562 98.3177 16.651 97.3281 17.6406C92.974 21.9948 90.7969 29.7135 90.7969 40.7969C90.7969 50.4948 92.3802 56.9271 95.5469 60.0938C97.1302 61.6771 98.7135 62.4688 100.297 62.4688C102.276 62.4688 104.057 61.6771 105.641 60.0938C108.016 57.7188 109.203 53.7604 109.203 48.2188V42.5781H100V36.9375H115.141V68.4062H110.094L109.203 63.0625C106.432 66.625 103.167 68.4062 99.4062 68.4062C96.0417 68.4062 93.1719 67.2188 90.7969 64.8438C86.2448 60.2917 83.9688 52.276 83.9688 40.7969C83.9688 28.526 86.4427 19.9167 91.3906 14.9688C94.3594 12 97.625 10.5156 101.188 10.5156C104.948 10.5156 107.917 11.6042 110.094 13.7812C113.458 17.1458 115.141 22.0938 115.141 28.625H108.906ZM147.797 14.375C152.151 18.7292 154.328 27.0417 154.328 39.3125C154.328 51.7812 152.151 60.1927 147.797 64.5469C145.224 67.1198 141.958 68.4062 138 68.4062C133.844 68.4062 130.479 67.1198 127.906 64.5469C123.552 60.1927 121.375 51.7812 121.375 39.3125C121.375 27.0417 123.552 18.7292 127.906 14.375C130.479 11.8021 133.844 10.5156 138 10.5156C141.958 10.5156 145.224 11.8021 147.797 14.375ZM132.062 18.8281C129.49 21.401 128.203 28.2292 128.203 39.3125C128.203 50.5938 129.49 57.5208 132.062 60.0938C133.844 61.875 135.823 62.7656 138 62.7656C139.979 62.7656 141.859 61.875 143.641 60.0938C146.214 57.5208 147.5 50.5938 147.5 39.3125C147.5 28.2292 146.214 21.401 143.641 18.8281C141.859 17.0469 139.979 16.1562 138 16.1562C135.823 16.1562 133.844 17.0469 132.062 18.8281Z" fill="#121212"/>
                            </svg>
                        </div>
                    ) : (
                        <Link to='/' className="header_logo">
                            <svg width="165" height="82" viewBox="0 0 165 82" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <line className="logo_color-stroke" y1="1" x2="160" y2="1" stroke="#121212" strokeWidth="2"/>
                                <line className="logo_color-stroke" y1="79" x2="160" y2="79" stroke="#121212" strokeWidth="2"/>
                                <path className="logo_color-fill" d="M8.85938 10.5156H15.6875V62.7656H39.7344V68.4062H8.85938V10.5156ZM71.7969 14.375C76.151 18.7292 78.3281 27.0417 78.3281 39.3125C78.3281 51.7812 76.151 60.1927 71.7969 64.5469C69.224 67.1198 65.9583 68.4062 62 68.4062C57.8438 68.4062 54.4792 67.1198 51.9062 64.5469C47.5521 60.1927 45.375 51.7812 45.375 39.3125C45.375 27.0417 47.5521 18.7292 51.9062 14.375C54.4792 11.8021 57.8438 10.5156 62 10.5156C65.9583 10.5156 69.224 11.8021 71.7969 14.375ZM56.0625 18.8281C53.4896 21.401 52.2031 28.2292 52.2031 39.3125C52.2031 50.5938 53.4896 57.5208 56.0625 60.0938C57.8438 61.875 59.8229 62.7656 62 62.7656C63.9792 62.7656 65.8594 61.875 67.6406 60.0938C70.2135 57.5208 71.5 50.5938 71.5 39.3125C71.5 28.2292 70.2135 21.401 67.6406 18.8281C65.8594 17.0469 63.9792 16.1562 62 16.1562C59.8229 16.1562 57.8438 17.0469 56.0625 18.8281ZM108.906 28.625C108.708 23.4792 107.719 20.0156 105.938 18.2344C104.552 16.849 102.969 16.1562 101.188 16.1562C99.6042 16.1562 98.3177 16.651 97.3281 17.6406C92.974 21.9948 90.7969 29.7135 90.7969 40.7969C90.7969 50.4948 92.3802 56.9271 95.5469 60.0938C97.1302 61.6771 98.7135 62.4688 100.297 62.4688C102.276 62.4688 104.057 61.6771 105.641 60.0938C108.016 57.7188 109.203 53.7604 109.203 48.2188V42.5781H100V36.9375H115.141V68.4062H110.094L109.203 63.0625C106.432 66.625 103.167 68.4062 99.4062 68.4062C96.0417 68.4062 93.1719 67.2188 90.7969 64.8438C86.2448 60.2917 83.9688 52.276 83.9688 40.7969C83.9688 28.526 86.4427 19.9167 91.3906 14.9688C94.3594 12 97.625 10.5156 101.188 10.5156C104.948 10.5156 107.917 11.6042 110.094 13.7812C113.458 17.1458 115.141 22.0938 115.141 28.625H108.906ZM147.797 14.375C152.151 18.7292 154.328 27.0417 154.328 39.3125C154.328 51.7812 152.151 60.1927 147.797 64.5469C145.224 67.1198 141.958 68.4062 138 68.4062C133.844 68.4062 130.479 67.1198 127.906 64.5469C123.552 60.1927 121.375 51.7812 121.375 39.3125C121.375 27.0417 123.552 18.7292 127.906 14.375C130.479 11.8021 133.844 10.5156 138 10.5156C141.958 10.5156 145.224 11.8021 147.797 14.375ZM132.062 18.8281C129.49 21.401 128.203 28.2292 128.203 39.3125C128.203 50.5938 129.49 57.5208 132.062 60.0938C133.844 61.875 135.823 62.7656 138 62.7656C139.979 62.7656 141.859 61.875 143.641 60.0938C146.214 57.5208 147.5 50.5938 147.5 39.3125C147.5 28.2292 146.214 21.401 143.641 18.8281C141.859 17.0469 139.979 16.1562 138 16.1562C135.823 16.1562 133.844 17.0469 132.062 18.8281Z" fill="#121212"/>
                            </svg>
                        </Link>
                    )}
                    {user.user ? (
                        <div className="header_panel">
                            <Link to='/profile' className="header_panel_button button">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M20.4853 15.5147C19.1783 14.2077 17.6226 13.2402 15.9253 12.6545C17.7432 11.4024 18.9375 9.30694 18.9375 6.9375C18.9375 3.11217 15.8253 0 12 0C8.17467 0 5.0625 3.11217 5.0625 6.9375C5.0625 9.30694 6.25683 11.4024 8.07478 12.6545C6.37744 13.2402 4.82175 14.2077 3.51473 15.5147C1.24823 17.7812 0 20.7947 0 24H1.875C1.875 18.417 6.41705 13.875 12 13.875C17.583 13.875 22.125 18.417 22.125 24H24C24 20.7947 22.7518 17.7812 20.4853 15.5147ZM12 12C9.20855 12 6.9375 9.729 6.9375 6.9375C6.9375 4.146 9.20855 1.875 12 1.875C14.7915 1.875 17.0625 4.146 17.0625 6.9375C17.0625 9.729 14.7915 12 12 12Z" fill="white"/>
                                </svg>
                            </Link>
                            <Link to='/favourites' className="header_panel_button header_panel_button-favourites button">
                                <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.8723 4.97778L9.19149 0L6.51064 4.97778L0 6.04444L4.97872 10.3111L3.44681 16L9.19149 13.1556L14.9362 16L13.4043 10.3111L18 6.04444L11.8723 4.97778Z" fill="white"/>
                                </svg>
                            </Link>
                            {/*<a className="header_panel_button header_panel_button-chat button" onClick={() => {
                                dispatch(switchChat())
                            }}>
                                <svg width="20" height="15" viewBox="0 0 20 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <ellipse cx="10" cy="6.01446" rx="10" ry="6.01446" fill="white"/>
                                    <path d="M1.76575 8.01924C5.56102 8.93846 4.06184 13.1342 3.13682 14.9541L9.99222 11.3601C7.63928 10.6918 6.47255 9.15924 1.76575 8.01924Z" fill="white"/>
                                </svg>
                            </a>*/}
                            <Link to='/advert-add' className="header_panel_button button mobile-n">Опубликовать объявление</Link>
                            <Link to='/advert-add' className="header_panel_button button mobile">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M2 4H0V18C0 19.1 0.9 20 2 20H16V18H2V4ZM18 0H6C4.9 0 4 0.9 4 2V14C4 15.1 4.9 16 6 16H18C19.1 16 20 15.1 20 14V2C20 0.9 19.1 0 18 0ZM17 9H13V13H11V9H7V7H11V3H13V7H17V9Z" fill="white"/>
                                </svg>
                            </Link>
                            <a className="header_panel_button header_panel_button-logout button" onClick={() => dispatch(logOut())}>
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.09 12.59L8.5 14L13.5 9L8.5 4L7.09 5.41L9.67 8H0V10H9.67L7.09 12.59ZM16 0H2C0.89 0 0 0.9 0 2V6H2V2H16V16H2V12H0V16C0 17.1 0.89 18 2 18H16C17.1 18 18 17.1 18 16V2C18 0.9 17.1 0 16 0Z" fill="white"/>
                                </svg>
                            </a>
                        </div>
                    ) : (                        
                        <div className="header_panel">
                            <Link to='/login' className="header_panel_link">Вход</Link>
                            <Link to='/registration' className="header_panel_link">Регистрация</Link>
                        </div>
                    )}
                </div>
            </div>
        </header>
    )
}